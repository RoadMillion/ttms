<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.tedu.ttms.product.dao.ProjectDao">
	<select id="findObjects" resultType="cn.tedu.ttms.system.entity.Project">
		select * from tms_projects order by createdTime desc
	</select>
	<select id="findPageObjects" resultType="cn.tedu.ttms.system.entity.Project">
		select * from tms_projects
		<where>
			<if test="name!=null and name !=''">
				name like concat("%",#{name},"%")
			</if>
			<if test="valid!=null">
				and valid=#{valid}
			</if>
		
		</where>
		
		 order by ${order} desc limit #{startIndex},#{pageSize}
	</select>
	<select id="getRowCount" resultType="int">
		select count(1) from tms_projects
				<where>
			<if test="name!=null and name !=''">
				name like concat("%",#{name},"%")
			</if>
			<if test="valid!=null">
				and valid=#{valid}
			</if>
		</where>
	</select>
	<!-- 执行禁用和启用操作  -->
	<update id="validById">
		update tms_projects set valid=#{valid}
		where id in 
		<foreach collection="ids" open="(" close=")" separator="," item="item">
			${item}
		</foreach>
	</update>
	
</mapper>